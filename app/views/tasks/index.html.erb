<% if flash[:success] %>
  <div class="alert alert-success">
    <%= flash[:success] %>
  </div>
<% end %>

<% if flash[:danger] %>
  <div class="alert alert-danger">
    <%= flash[:danger] %>
  </div>
<% end %>

<div class="container">
  <% if current_user.id == 1 %>
    <h3 class="tasks__index-info">
      タスクを見たいときはリンクをクリックして下さい。<br>
      また戻るときは黒いところの一覧へ戻るをクリックして下さい。<br>
      それ以外は触らないようにお願いします。
    </h3>
  <% end %>
  <div class="tasks__index-title">
    <h1>タスク一覧</h1>
    <div class="tasks__index-button">
      <%= link_to '新規登録',new_task_path, class:"btn btn-primary" %>　
      <%= link_to '一括削除', destroy_all_tasks_path, method: :delete, data: { confirm: '全て削除します。よろしいですか？' }, class: 'btn btn-danger' %>
    </div>
  </div>
  
    <table class="table table-border-bottom table-hover">
      <tr>
        <th>タスク名</th>
        <th>詳細</th>
        <th>登録日時</th>
        <th colspan="3"></th>
      </tr>

      <% @tasks.each do |task| %>
        <tr>
          <td><%= link_to task.title,task_path(task) %></td>
          <td><%= truncate(task.content, length: 10) %></td>
          <td><%= task.created_at.strftime('%Y-%m-%d %X') %></td>
          <td>
            <div class="tasks__index-table-button">
              <%= link_to '編集',edit_task_path(task), class:"btn btn-primary" %>　 <%= link_to '削除',task_path(task), method: :delete, data: { confirm: '本当に削除しますか？' },class:"btn btn-danger" %>
            </div>
          </td>
        </tr>
      <% end %>
    </table>
</div>